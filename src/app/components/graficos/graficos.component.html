<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard de Ventas</h1>
    <button class="btn-refresh" (click)="cargarDatosDashboard()">
      <span>游댃</span> Actualizar
    </button>
  </div>

  <!-- Spinner de carga -->
  <div *ngIf="cargando" class="loading-spinner">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>

  <!-- Contenido del dashboard -->
  <div *ngIf="!cargando && dashboardData" class="dashboard-content">
    
    <!-- Tarjetas de estad칤sticas -->
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-icon sales">游눯</div>
        <div class="stat-content">
          <h3>Ventas Totales</h3>
          <p class="stat-value">{{ formatearMoneda(dashboardData.estadisticasGenerales.ventasTotales) }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon orders">游닍</div>
        <div class="stat-content">
          <h3>Total Pedidos</h3>
          <p class="stat-value">{{ dashboardData.estadisticasGenerales.totalPedidos }}</p>
          <span class="stat-detail">{{ dashboardData.estadisticasGenerales.pedidosHoy }} hoy</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon products">游꼢</div>
        <div class="stat-content">
          <h3>Productos</h3>
          <p class="stat-value">{{ dashboardData.estadisticasGenerales.totalProductos }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon customers">游논</div>
        <div class="stat-content">
          <h3>Clientes</h3>
          <p class="stat-value">{{ dashboardData.estadisticasGenerales.totalClientes }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon average">游늵</div>
        <div class="stat-content">
          <h3>Promedio por Pedido</h3>
          <p class="stat-value">{{ formatearMoneda(dashboardData.estadisticasGenerales.promedioVentaPorPedido) }}</p>
        </div>
      </div>
    </div>

    <!-- Gr치ficos -->
    <div class="charts-container">
      
      <!-- Gr치fico de l칤nea - Ventas por d칤a -->
      <div class="chart-card full-width">
        <div class="chart-wrapper">
          <canvas baseChart
            [data]="lineChartData"
            [options]="lineChartOptions"
            type="line">
          </canvas>
        </div>
      </div>

      <!-- Gr치fico de dona - Pedidos por estado -->
      <div class="chart-card half-width">
        <div class="chart-wrapper">
          <canvas baseChart
            [datasets]="doughnutChartDatasets"
            [labels]="doughnutChartLabels"
            [options]="doughnutChartOptions"
            type="doughnut">
          </canvas>
        </div>
      </div>

      <!-- Gr치fico de barras - Productos m치s vendidos -->
      <div class="chart-card half-width">
        <div class="chart-wrapper">
          <canvas baseChart
            [datasets]="barChartDatasets"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            type="bar">
          </canvas>
        </div>
      </div>
    </div>

    <!-- Tabla de ventas por categor칤a -->
    <div class="table-card">
      <h2>Ventas por Categor칤a</h2>
      <table class="category-table">
        <thead>
          <tr>
            <th>Categor칤a</th>
            <th>Total Ventas</th>
            <th>Cantidad Vendida</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let categoria of dashboardData.ventasPorCategoria">
            <td>{{ categoria.nombreCategoria }}</td>
            <td>{{ formatearMoneda(categoria.totalVentas) }}</td>
            <td>{{ categoria.cantidadProductos }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>